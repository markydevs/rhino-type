(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5782:(e,t,s)=>{Promise.resolve().then(s.bind(s,6280))},6280:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var a=s(5155),r=s(9719),i=s(2115),o=s(1758);function n(e){let t=o.a.word.words(50).split(" ");return t.sort(()=>Math.random()-.5),Array.from({length:e},()=>{let e=Math.floor(Math.random()*t.length);return t[e]})}s(6372);var l=s(5781),d=s(9861),c=s(8190),u=s.n(c),p=s(6472),h=s(7058),m=s(770),x=s(587);l.t1.register(l.PP,l.kc,l.FN,l.No,l.hE,l.m_,l.s$,l.A6,l.E8,l.dN,l.ZT,l.Pz,l.UA,l.iw,u(),d.A),l.t1.defaults.color="#666",l.t1.defaults.scale.grid.color="#333";let f=()=>{let{testSettings:e}=(0,x.E)(),[t,s]=(0,i.useState)(!0),[r,o]=(0,i.useState)(""),[l,d]=(0,i.useState)(""),[c,u]=(0,i.useState)(0),[f,g]=(0,i.useState)(0),[y,b]=(0,i.useState)(0),[S,k]=(0,i.useState)(null),[w,j]=(0,i.useState)(0),[M,v]=(0,i.useState)(0),[C,N]=(0,i.useState)(100),[E,F]=(0,i.useState)(100),[A,P]=(0,i.useState)([]),[T,D]=(0,i.useState)([]),[L,R]=(0,i.useState)([]),[W,_]=(0,i.useState)([]),[I,z]=(0,i.useState)(!1),[U,B]=(0,i.useState)(!1),[J,K]=(0,i.useState)(0),[O,q]=(0,i.useState)(0),[Z,$]=(0,i.useState)(0);(0,i.useEffect)(()=>{"words"===e.type?o(n(e.wordCount).join(" ")):o(n(100).join(" "))},[e]),(0,i.useEffect)(()=>{if(S&&c>0&&!U){let t=(Date.now()-S)/1e3,s=Math.floor(t);if("time"===e.type&&t>=e.timeLimit){B(!0);return}if(t>1){let e=parseFloat((c/5/(t/60)).toFixed(2)),a=parseFloat((l.split("").filter((e,t)=>e===r[t]).length/5/(t/60)).toFixed(2)),i=parseFloat((f/(f+y)*100).toFixed(2));if(v(e),j(a),N(i),P(e=>[...e,parseFloat(t.toFixed(2))]),D(t=>[...t,e]),R(e=>[...e,a]),s!==J){let e=y-O;e>0&&_(s=>[...s,{x:t.toFixed(2),y:e}]),q(y),K(s)}}}},[c,f,y,S,U,r,l,J,O,e]);let G=async(e,t,s,a,r)=>{if(!m.j.currentUser){console.error("No user is signed in.");return}let i=m.j.currentUser.uid;try{await (0,h.gS)((0,h.rJ)(m.db,"typingTests",i,"sessions"),{wpm:e,accuracy:t,consistency:s,rawWpmData:a,errorPoints:r,timestamp:new Date,completed:!0,time:(Date.now()-S)/1e3}),console.log("Typing test data saved successfully!")}catch(e){console.error("Error saving typing test:",e)}};(0,i.useEffect)(()=>{if(U){let e=T.reduce((e,t)=>e+t,0)/T.length,t=Math.max(0,100-100*(Math.sqrt(T.reduce((t,s)=>t+Math.pow(s-e,2),0)/T.length)/e));F(t),G(w,C,t,T,W)}},[U,T,w,C,W,G]),(0,i.useEffect)(()=>{let t;return"time"===e.type&&S&&!U&&($(e.timeLimit),t=setInterval(()=>{let s=Math.floor((Date.now()-S)/1e3),a=e.timeLimit-s;$(a),a<=0&&clearInterval(t)},1e3)),()=>{t&&clearInterval(t)}},[S,e,U]);let H=(0,i.useCallback)(e=>{if(t||U)return;let s=e.key;if(r){if("Backspace"===s){if(c>0){let e=l[c-1]===r[c-1];d(e=>e.slice(0,-1)),u(e=>e-1),e?g(e=>e-1):b(e=>e-1)}}else if(1===s.length&&!e.ctrlKey&&!e.altKey){S||k(Date.now());let e=s===r[c];d(e=>e+s),u(e=>e+1),e?g(e=>e+1):b(e=>e+1),z(!0),c+1===r.length&&B(!0)}}},[c,r,l,S,U,t]);return(0,i.useEffect)(()=>(document.addEventListener("keydown",H),()=>{document.removeEventListener("keydown",H)}),[H]),(0,a.jsxs)("div",{className:"typing-test relative",style:{padding:"20px"},children:[t&&(0,a.jsx)("div",{onClick:()=>s(!1),className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 backdrop-blur-sm transition duration-200 cursor-pointer z-10",children:(0,a.jsx)("span",{className:"text-xl font-semibold text-white",children:"Click to Unblur"})}),(0,a.jsx)("div",{className:"text ".concat(t?"filter blur-md":""),children:r.split("").map((e,t)=>(0,a.jsx)("span",{className:"character ".concat(t<c?l[t]===e?"correct":"incorrect":""," ").concat(t===c?"last-child":""," ").concat(I?"typing":"idle"),children:e},t))}),(0,a.jsxs)("div",{className:"stats",style:{marginTop:"20px",fontSize:"2rem"},children:[(0,a.jsxs)("p",{children:["WPM: ",Math.round(w)]}),(0,a.jsxs)("p",{children:["Raw WPM: ",Math.round(M)]}),(0,a.jsxs)("p",{children:["ACC: ",C.toFixed(2),"%"]}),(0,a.jsxs)("p",{children:["Consistency: ",E.toFixed(2),"%"]}),U&&(0,a.jsx)("p",{children:"Test Complete!"}),"time"===e.type&&(0,a.jsxs)("p",{style:{color:Z<=5?"#ca4754":"#d1d0c5"},children:["Time Left: ",Z," seconds"]})]}),(0,a.jsx)("div",{className:"chart-container",style:{height:"300px",width:"100%",marginTop:"20px",backgroundColor:"#323437",display:U?"block":"none",border:"1px solid #444",borderRadius:"8px",padding:"10px"},children:(0,a.jsx)(p.N1,{data:{labels:A,datasets:[{label:"Raw WPM",data:T,borderColor:"rgba(125, 125, 255, 0.75)",backgroundColor:"transparent",tension:.4,pointRadius:0,borderWidth:2,order:2,yAxisID:"wpm"},{label:"WPM",data:L,borderColor:"#e2b714",backgroundColor:"transparent",tension:.4,pointRadius:0,borderWidth:2,order:1,yAxisID:"wpm"},{label:"Errors",data:W,pointStyle:"crossRot",pointRadius:4,pointBackgroundColor:"#ca4754",pointBorderColor:"#ca4754",showLine:!1,order:0,yAxisID:"error",type:"scatter"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,labels:{color:"#d1d0c5"}},tooltip:{enabled:!0,backgroundColor:"#333",titleColor:"#d1d0c5",bodyColor:"#d1d0c5"}},scales:{x:{type:"linear",title:{display:!0,text:"Time (seconds)",color:"#d1d0c5"},grid:{color:"#444"},ticks:{color:"#d1d0c5",maxTicksLimit:14,stepSize:3,callback:function(e){return Math.floor(e)}}},wpm:{type:"linear",position:"left",ticks:{padding:10},suggestedMin:function(e){return Math.min(...e.chart.data.datasets[0].data)-5},suggestedMax:function(e){return Math.max(...e.chart.data.datasets[0].data)+5},title:{display:!0,text:"WPM"}},error:{type:"linear",position:"right",suggestedMin:0,suggestedMax:5,title:{display:!0,text:"Errors"}}},animation:{duration:0},elements:{line:{borderJoinStyle:"round"}}}})})]})};function g(){return(0,a.jsxs)("main",{className:"flex min-h-screen flex-col ",children:[(0,a.jsx)(r.F,{}),(0,a.jsx)("div",{className:"container mx-auto px-12 py-4 ",children:(0,a.jsx)(f,{})})]})}},6372:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[942,245,992,782,647,309,455,968,759,820,719,441,517,358],()=>t(5782)),_N_E=e.O()}]);