(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{7890:(e,a,t)=>{Promise.resolve().then(t.bind(t,3686))},3686:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var l=t(5155),s=t(2115),c=t(7058),r=t(770),n=t(9719),o=t(6472),d=t(5781),i=t(4565);d.t1.register(d.PP,d.kc,d.FN,d.No,d.hE,d.m_,d.s$,d.dN);let m=()=>{let[e,a]=(0,s.useState)([]),[t,d]=(0,s.useState)(!0),[m,b]=(0,s.useState)(null);if((0,s.useEffect)(()=>{let e=(0,i.hg)(r.j,e=>{console.log("Auth state changed:",e),b(e)});return()=>e()},[]),(0,s.useEffect)(()=>{(async()=>{if(!m){console.log("No user is authenticated");return}try{console.log("Fetching data for user:",m.uid);let e=(0,c.rJ)(r.db,"typingTests",m.uid,"sessions"),t=(0,c.P)(e),l=(await (0,c.GG)(t)).docs.map(e=>{let a=e.data();return console.log("Document data:",a),{id:e.id,timestamp:a.timestamp,wpm:a.wpm,rawWpm:a.rawWpm,accuracy:a.accuracy,consistency:a.consistency,time:a.time,completed:a.completed}});console.log("Fetched data:",l),a(l),d(!1)}catch(e){console.error("Error fetching data:",e),d(!1)}})()},[m]),t)return(0,l.jsx)("div",{children:"Loading..."});if(!e.length)return(0,l.jsx)("div",{children:"No data available"});let h=e.map(e=>new Date(1e3*e.timestamp.seconds).toLocaleDateString()),p=e.map(e=>e.wpm),u=e.map(e=>e.accuracy),g=e.map(e=>e.consistency),x=e.length,v=e.filter(e=>e.completed).length,y=(v/x*100).toFixed(1),N=e.reduce((e,a)=>e+(a.time||0),0),j=e.map(e=>e.wpm),f=e.map(e=>e.rawWpm),w=e.map(e=>e.accuracy),C=e.map(e=>e.consistency),A=e=>e.slice(-10),P=e=>e.length?(e.reduce((e,a)=>e+a,0)/e.length).toFixed(1):"0",M=[{label:"Tests Started",value:x},{label:"Tests Completed",value:"".concat(v," (").concat(y,"%)")},{label:"Restarts per Completed Test",value:((x-v)/(v||1)).toFixed(1)},{label:"Time Typing",value:(e=>isNaN(e)||e<0?"00:00:00":new Date(1e3*e).toISOString().substring(11,19))(N)},{label:"Highest WPM",value:Math.max(...j,0)},{label:"Average WPM",value:P(j)},{label:"Average WPM (Last 10)",value:P(A(j))},{label:"Highest Raw WPM",value:Math.max(...f,0)},{label:"Average Raw WPM",value:P(f)},{label:"Average Raw WPM (Last 10)",value:P(A(f))},{label:"Highest Accuracy",value:"".concat(Math.max(...w,0),"%")},{label:"Avg Accuracy",value:"".concat(P(w),"%")},{label:"Avg Accuracy (Last 10)",value:"".concat(P(A(w)),"%")},{label:"Highest Consistency",value:"".concat(Math.max(...C,0),"%")},{label:"Avg Consistency",value:"".concat(P(C),"%")},{label:"Avg Consistency (Last 10)",value:"".concat(P(A(C)),"%")}];return(0,l.jsxs)("div",{children:[(0,l.jsx)(n.F,{}),(0,l.jsxs)("div",{className:"container mx-auto p-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Dashboard"}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:M.map((e,a)=>(0,l.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-md",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold",children:e.label}),(0,l.jsx)("p",{className:"text-2xl font-bold",children:e.value})]},a))}),(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)(o.N1,{data:{labels:h,datasets:[{label:"WPM",data:p,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",fill:!0},{label:"Accuracy",data:u,borderColor:"rgba(153, 102, 255, 1)",backgroundColor:"rgba(153, 102, 255, 0.2)",fill:!0},{label:"Consistency",data:g,borderColor:"rgba(255, 159, 64, 1)",backgroundColor:"rgba(255, 159, 64, 0.2)",fill:!0}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Typing Test Performance"}}}})}),(0,l.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Test Data"}),(0,l.jsxs)("table",{className:"min-w-full bg-white",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"py-2 px-4 border-b",children:"Date"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b",children:"WPM"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b",children:"Accuracy"}),(0,l.jsx)("th",{className:"py-2 px-4 border-b",children:"Consistency"})]})}),(0,l.jsx)("tbody",{children:e.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:new Date(1e3*e.timestamp.seconds).toLocaleDateString()}),(0,l.jsx)("td",{className:"py-2 px-4 border-b",children:e.wpm}),(0,l.jsxs)("td",{className:"py-2 px-4 border-b",children:[e.accuracy,"%"]}),(0,l.jsxs)("td",{className:"py-2 px-4 border-b",children:[e.consistency,"%"]})]},e.id))})]})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[942,992,782,647,968,759,719,441,517,358],()=>a(7890)),_N_E=e.O()}]);